{% load static %}
{% load i18n %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="{% static 'css/style.css' %}">
  {% block extra_css %}{% endblock %}

  <title>{% trans "TrafficIQ" %}</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <!-- Bootstrap Icons -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css">
  <style>
     html, body {
    height: 100%;
    margin: 0;
    display: flex;
    flex-direction: column;
  }

  /* ðŸŒ™ DARK MODE THEME */
body.dark-mode {
  background-color: #121212;
  color: #f8f9fa;
}

/* Navbar in Dark Mode */
body.dark-mode .pastel-navbar {
  background: linear-gradient(135deg, #1f1f1f, #2d2d2d, #3a3a3a, #4a4a4a);
  animation: none;
}

body.dark-mode .nav-link {
  color: #f8f9fa !important;
}

body.dark-mode .nav-link:hover {
  color: #0dcaf0 !important;
  text-decoration: underline;
}

/* Cards, Buttons, etc. */
body.dark-mode .card {
  background-color: #1e1e1e;
  color: #f8f9fa;
  border: 1px solid #333;
}

body.dark-mode .btn-primary {
  background-color: #0dcaf0;
  border-color: #0dcaf0;
  color: #000;
}


  /* Animated pastel gradient matching hero */
.pastel-navbar {
  background: linear-gradient(135deg, rgb(255, 255, 255), #fddde6, #e0c3fc, #a8edea);
  background-size: 200% 200%;
  animation: pastelShift 12s ease infinite;
  backdrop-filter: blur(12px);
  transition: background 0.4s ease;
  border-bottom: 1px solid rgba(0, 0, 0, 0.05);
}

/* Reuse same animation as hero */
@keyframes pastelShift {
  0% { background-position: 0% 50%; }
  50% { background-position: 100% 50%; }
  100% { background-position: 0% 50%; }
}

/* Link Styling */
.navbar .nav-link {
  color: #212529 !important;
  transition: color 0.3s ease;
}
.navbar .nav-link:hover {
  color: #0d6efd !important;
  text-decoration: underline;
}

/* Profile Dropdown */
.dropdown-menu {
  border-radius: 12px;
  padding: 8px 0;
}

/* Sticky Navbar */
.sticky-top {
  position: sticky;
  top: 0;
  z-index: 1030;
}


  main {
    flex: 1;
  }

  .footer {
    background-color: #020202ff; /* default blue theme */
    color: white;
    position: relative;
    bottom: 0;
    width: 100%;
  }

  /* Match with dark mode */
  body.dark-mode .footer {
    background-color: #212529;
    color: #f8f9fa;
  }

  .footer a {
    color: #ffc107;
    text-decoration: none;
  }
  .footer a:hover {
    text-decoration: underline;
  }

  </style>
</head>
<body>

{% block navbar %}
  <!-- Navbar -->
  <nav class="navbar navbar-expand-lg pastel-navbar shadow-sm sticky-top">
    <div class="container">
      <!-- Brand -->
      <a class="navbar-brand d-flex align-items-center text-dark fw-bold" href="{% url 'landing' %}">
        <img src="{% static 'images/trafficiq_logo.png' %}" alt="{% trans 'TrafficIQ Logo' %}" width="30" height="30" class="me-2 rounded-circle">
        {% trans "TrafficIQ" %}
      </a>
      {% comment %} <p>{% trans "Current language:" %} {{ LANGUAGE_CODE }}</p> {% endcomment %}

      <!-- Toggler -->
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
        <span class="navbar-toggler-icon"></span>
      </button>

      <!-- Nav Links -->
      {% if not request.user.is_superuser %}
      <div class="collapse navbar-collapse justify-content-end" id="navbarNav">
        <ul class="navbar-nav align-items-center">
          <li class="nav-item"><a class="nav-link fw-semibold text-dark" href="{% url 'rules' %}">{% trans "Rules" %}</a></li>
          <li class="nav-item"><a class="nav-link fw-semibold text-dark" href="{% url 'tutorials' %}">{% trans "Tutorials" %}</a></li>
          <li class="nav-item"><a class="nav-link fw-semibold text-dark" href="{% url 'start_quiz' %}">{% trans "Quiz" %}</a></li>

          <form action="{% url 'set_language' %}" method="post" class="d-inline">
            {% csrf_token %}
            <input name="language" type="hidden" value="en">
            <button type="submit" class="btn btn-sm btn-outline-primary">{% trans "English" %}</button>
          </form>

          <form action="{% url 'set_language' %}" method="post" class="d-inline">
            {% csrf_token %}
            <input name="language" type="hidden" value="ur">
            <button type="submit" class="btn btn-sm btn-outline-success">{% trans "Urdu" %}</button>
          </form>

          <li class="nav-item d-flex align-items-center">
            <button id="theme-toggle" class="nav-link text-dark bg-transparent border-0 fw-semibold">
              ðŸŒ™ {% trans "Dark Mode" %}
            </button>
          </li>
        </ul>
      </div>
      {% endif %}

      <!-- Profile / Auth Links -->
      <ul class="navbar-nav ms-auto align-items-center">
        {% if user.is_authenticated %}
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle d-flex align-items-center text-dark fw-semibold" href="#" id="profileDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
            {% if user.profile.profile_picture %}
              <img src="{{ user.profile.profile_picture.url }}" class="rounded-circle me-2" width="28" height="28" alt="{% trans 'Profile' %}">
            {% else %}
              <i class="bi bi-person-circle fs-5 me-1"></i>
            {% endif %}
            {{ user.username }}
          </a>
          <ul class="dropdown-menu dropdown-menu-end shadow-sm" aria-labelledby="profileDropdown">
            <li><a class="dropdown-item" href="{% url 'profile' %}">{% trans "My Profile" %}</a></li>
            <li><a class="dropdown-item text-danger" href="{% url 'logout' %}">{% trans "Logout" %}</a></li>
          </ul>
        </li>
        {% else %}
        <li class="nav-item"><a class="nav-link text-dark fw-semibold" href="{% url 'login' %}">{% trans "Login" %}</a></li>
        {% endif %}
      </ul>
    </div>
  </nav>
{% endblock %}

<!-- Main content -->
<main class="">
  {% block content %}{% endblock %}
</main>

<!-- Footer -->
{% block footer %}
<footer class="footer mt-auto py-3 text-center">
  <div class="container">
    <p class="mb-0 small">
      ðŸš¦ <strong>{% trans "TrafficIQ" %}</strong> â€” {% trans "Learn Traffic Rules, Take Quizzes, and Stay Safe on the Road." %}
    </p>
    <p class="text-white small mb-0">
      Â© {{ now|date:"Y" }} {% trans "TrafficIQ" %} | {% trans "Developed by" %} <strong>Annas Javed</strong>
    </p>
  </div>
</footer>
{% endblock %}

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script>
  const body = document.body;
  const toggleBtn = document.getElementById("theme-toggle");

  // Load saved theme
  if (localStorage.getItem("theme") === "dark") {
    body.classList.add("dark-mode");
    toggleBtn.textContent = " Light Mode";
  } else {
    body.classList.add("light-mode");
    toggleBtn.textContent = " Dark Mode";
  }

  toggleBtn.addEventListener("click", () => {
    if (body.classList.contains("light-mode")) {
      body.classList.replace("light-mode", "dark-mode");
      toggleBtn.textContent = " Light Mode";
      localStorage.setItem("theme", "dark");
    } else {
      body.classList.replace("dark-mode", "light-mode");
      toggleBtn.textContent = " Dark Mode";
      localStorage.setItem("theme", "light");
    }
  });
</script>

</body>
</html>

{% comment %} {% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  {% load static %}
  <link rel="stylesheet" href="{% static 'css/style.css' %}">
  {% block extra_css %}{% endblock %}

  <title>TrafficIQ</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <!-- Bootstrap Icons -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css">
  <style>
  html, body {
    height: 100%;
    margin: 0;
    display: flex;
    flex-direction: column;
  }

  /* ðŸŒ™ DARK MODE THEME */
body.dark-mode {
  background-color: #121212;
  color: #f8f9fa;
}

/* Navbar in Dark Mode */
body.dark-mode .pastel-navbar {
  background: linear-gradient(135deg, #1f1f1f, #2d2d2d, #3a3a3a, #4a4a4a);
  animation: none;
}

body.dark-mode .nav-link {
  color: #f8f9fa !important;
}

body.dark-mode .nav-link:hover {
  color: #0dcaf0 !important;
  text-decoration: underline;
}

/* Cards, Buttons, etc. */
body.dark-mode .card {
  background-color: #1e1e1e;
  color: #f8f9fa;
  border: 1px solid #333;
}

body.dark-mode .btn-primary {
  background-color: #0dcaf0;
  border-color: #0dcaf0;
  color: #000;
}


  /* Animated pastel gradient matching hero */
.pastel-navbar {
  background: linear-gradient(135deg, rgb(255, 255, 255), #fddde6, #e0c3fc, #a8edea);
  background-size: 200% 200%;
  animation: pastelShift 12s ease infinite;
  backdrop-filter: blur(12px);
  transition: background 0.4s ease;
  border-bottom: 1px solid rgba(0, 0, 0, 0.05);
}

/* Reuse same animation as hero */
@keyframes pastelShift {
  0% { background-position: 0% 50%; }
  50% { background-position: 100% 50%; }
  100% { background-position: 0% 50%; }
}

/* Link Styling */
.navbar .nav-link {
  color: #212529 !important;
  transition: color 0.3s ease;
}
.navbar .nav-link:hover {
  color: #0d6efd !important;
  text-decoration: underline;
}

/* Profile Dropdown */
.dropdown-menu {
  border-radius: 12px;
  padding: 8px 0;
}

/* Sticky Navbar */
.sticky-top {
  position: sticky;
  top: 0;
  z-index: 1030;
}


  main {
    flex: 1;
  }

  .footer {
    background-color: #020202ff; /* default blue theme */
    color: white;
    position: relative;
    bottom: 0;
    width: 100%;
  }

  /* Match with dark mode */
  body.dark-mode .footer {
    background-color: #212529;
    color: #f8f9fa;
  }

  .footer a {
    color: #ffc107;
    text-decoration: none;
  }
  .footer a:hover {
    text-decoration: underline;
  }
</style>

</head>
<body>

   {% block navbar %}
  <!-- Navbar (common across all pages) -->
  <nav class="navbar navbar-expand-lg pastel-navbar shadow-sm sticky-top">
  <div class="container">
    
    <!-- Brand -->
    <a class="navbar-brand d-flex align-items-center text-dark fw-bold" href="{% url 'landing' %}">
      <img src="{% static 'images/trafficiq_logo.png' %}" alt="TrafficIQ Logo" width="30" height="30" class="me-2 rounded-circle">
      TrafficIQ
    </a>
    <p>Current language: {{ LANGUAGE_CODE }}</p>



    <!-- Toggler -->
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
      <span class="navbar-toggler-icon"></span>
    </button>

    <!-- Nav Links -->
    {% if not request.user.is_superuser %}
    <div class="collapse navbar-collapse justify-content-end" id="navbarNav">
      <ul class="navbar-nav align-items-center">
        <li class="nav-item"><a class="nav-link fw-semibold text-dark" href="{% url 'rules' %}">Rules</a></li>
        <li class="nav-item"><a class="nav-link fw-semibold text-dark" href="{% url 'tutorials' %}">Tutorials</a></li>
        <li class="nav-item"><a class="nav-link fw-semibold text-dark" href="{% url 'start_quiz' %}">Quiz</a></li>
        <form action="{% url 'set_language' %}" method="post" class="d-inline">
    {% csrf_token %}
    <input name="language" type="hidden" value="en">
    <button type="submit" class="btn btn-sm btn-outline-primary">English</button>
</form>

<form action="{% url 'set_language' %}" method="post" class="d-inline">
    {% csrf_token %}
    <input name="language" type="hidden" value="ur">
    <button type="submit" class="btn btn-sm btn-outline-success">Ø§Ø±Ø¯Ùˆ</button>
</form>

        <li class="nav-item d-flex align-items-center">
          <button id="theme-toggle" class="nav-link text-dark bg-transparent border-0 fw-semibold">
            ðŸŒ™ Dark Mode
          </button>
        </li>
      </ul>
    </div>
    {% endif %}

    <!-- Profile / Auth Links -->
    <ul class="navbar-nav ms-auto align-items-center">
      {% if user.is_authenticated %}
      <li class="nav-item dropdown">
        <a class="nav-link dropdown-toggle d-flex align-items-center text-dark fw-semibold" href="#" id="profileDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
          {% if user.profile.profile_picture %}
            <img src="{{ user.profile.profile_picture.url }}" class="rounded-circle me-2" width="28" height="28" alt="Profile">
          {% else %}
            <i class="bi bi-person-circle fs-5 me-1"></i>
          {% endif %}
          {{ user.username }}
        </a>
        <ul class="dropdown-menu dropdown-menu-end shadow-sm" aria-labelledby="profileDropdown">
          <li><a class="dropdown-item" href="{% url 'profile' %}">My Profile</a></li>
          <li><a class="dropdown-item text-danger" href="{% url 'logout' %}">Logout</a></li>
        </ul>
      </li>
      {% else %}
      <li class="nav-item"><a class="nav-link text-dark fw-semibold" href="{% url 'login' %}">Login</a></li>
      {% endif %}
    </ul>
  </div>
</nav>



 {%endblock%}
  <!-- Main content -->
  <main class="">
    {% block content %}{% endblock %}
  </main>

  <!-- Footer -->
  {% block footer %}
  <footer class="footer mt-auto py-3 text-center">
  <div class="container">
    <p class="mb-0 small">
      ðŸš¦ <strong>TrafficIQ</strong> â€” Learn Traffic Rules, Take Quizzes, and Stay Safe on the Road.  
    </p>
    <p class="text-white small mb-0">
      Â© {{ now|date:"Y" }} TrafficIQ | Developed by <strong>Annas Javed</strong>
    </p>
  </div>
</footer>


  {%endblock%}

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script>
  const body = document.body;
  const toggleBtn = document.getElementById("theme-toggle");

  // Load saved theme
  if (localStorage.getItem("theme") === "dark") {
    body.classList.add("dark-mode");
    toggleBtn.textContent = " Light Mode";
  } else {
    body.classList.add("light-mode");
    toggleBtn.textContent = " Dark Mode";
  }

  toggleBtn.addEventListener("click", () => {
    if (body.classList.contains("light-mode")) {
      body.classList.replace("light-mode", "dark-mode");
      toggleBtn.textContent = " Light Mode";
      localStorage.setItem("theme", "dark");
    } else {
      body.classList.replace("dark-mode", "light-mode");
      toggleBtn.textContent = " Dark Mode";
      localStorage.setItem("theme", "light");
    }
  });
</script>

</body>
</html>  {% endcomment %}