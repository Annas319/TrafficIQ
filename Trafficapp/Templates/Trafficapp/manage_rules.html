{% extends "base.html" %}
{% block content %}
<div class="container mt-5">
  <h2>ğŸ“‹ Manage Traffic Rules</h2>
  <a href="{% url 'add_rule' %}" class="btn btn-success mb-3">â• Add Rule</a>
  
  <table class="table table-bordered">
    <thead>
      <tr>
        <th>Title</th>
        <th>Added By</th>
        <th>Uploaded At</th>
        <th>Download Link</th>
      </tr>
    </thead>
    <tbody>
      {% for rule in rules %}
        <tr>
          <td>{{ rule.title }}</td>
          <td>{{ rule.added_by.username }}</td>
          <td>{{ rule.created_at|date:"Y-m-d H:i" }}</td>
          <td>
            {% if rule.file %}
              <a href="{{ rule.file.url }}" target="_blank">ğŸ“‚ Download File</a>
            {% else %}
              No file
            {% endif %}
        </td>
          <td>
            <a href="{% url 'delete_rule' rule.id %}" class="btn btn-danger btn-sm">
              ğŸ—‘ï¸ Delete
            </a></td>        
        </tr>
      {% empty %}
        <tr>
          <td colspan="4" class="text-center">No rules added yet.</td>
        </tr>
      {% endfor %}
    </tbody>
  </table>
</div>
{% endblock %}
